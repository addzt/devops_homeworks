# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

> - Электронные чеки в json виде

`Документоориентированные базы данных` - в этих базах отлично хранится несвязанная информация в больших объёмах и они поддерживают Json.

> - Склады и автомобильные дороги для логистической компании

`Графовые базы данных` - логистику удобно строить при помощи графов. 

> - Генеалогические деревья

`Сетевые базы данных` - сетевой узел может иметь отношения с несколькими объектами.

> - Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации

`Базы данных ключ-значение` - хранение данных как совокупность пар "ключ-значение" подходящий вариант для решения данной задачи.

> - Отношения клиент-покупка для интернет-магазина

`Реляционные базы данных` - отношения между данными являются реляционными и данные хранятся в виде таблиц.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)

- При сетевых сбоях, система может разделиться на 2 раздельных кластера

- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

| Пункт                                                                    | CAP | PACELC |       
|--------------------------------------------------------------------------|-----|--------|
| Данные записываются на все узлы с задержкой до часа (асинхронная запись) | PA  | EL     |                  
| При сетевых сбоях, система может разделиться на 2 раздельных кластера    | PA  | PA     |                 
| Система может не прислать корректный ответ или сбросить соединение       | PC  | PC     |                 

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Нет, т.к. эти принципы противопоставляются друг другу.

`ACID` обеспечивает согласованность системы, а `BASE` фокусируется на высокой доступности.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

СУБД `Redis`.

`Redis`  — резидентная система управления базами данных класса NoSQL с открытым исходным кодом, работающая со структурами данных типа «ключ — значение». Используется как для баз данных, так и для реализации кэшей, брокеров сообщений.

Преимущества:

> * Производительность

Все данные Redis хранятся в памяти, что обеспечивает низкую задержку и высокую пропускную способность доступа к данным.

> * Гибкие структуры данных

В отличие от других хранилищ на основе пар «ключ – значение», которые поддерживают ограниченный набор структур данных, Redis поддерживает огромное разнообразие структур данных, позволяющее удовлетворить потребности разнообразных приложений.

> * Простота и удобство

Redis позволяет писать такой же сложный код с меньшим количеством простых строк. Redis позволяет писать меньше строк для хранения, использования данных и организации доступа к данным в приложениях. Разница в том, что, в отличие от языков запросов традиционных баз данных, с Redis разработчики могут использовать простую структуру команд. Например, вы можете задействовать структуру хэш-данных Redis, чтобы перемещать данные в хранилище только одной строкой кода.

> * Репликация и постоянное хранение

В Redis применяется архитектура узлов «ведущий‑подчиненный» и поддерживается асинхронная репликация, при которой данные могут копироваться на несколько подчиненных серверов. Это обеспечивает как улучшенные характеристики чтения (так как запросы могут быть распределены между серверами), так и ускоренное восстановление в случае сбоя основного сервера.

> * Высокая доступность и масштабируемость

Redis предлагает архитектуру «ведущий‑подчиненный» с одним ведущим узлом или с кластерной топологией. Это позволяет создавать высокодоступные решения, обеспечивающие стабильную производительность и надежность. 

> * Инструменты с открытым исходным кодом

Redis – проект с открытым исходным кодом, поддерживаемый активным сообществом.

Недостатки:
> * Размер БД ограничен доступной памятью  

> * Шардинг ведет к увеличению задержки

> * Это NoSQL - никакого языка SQL

> * Нет сегментации на пользователей или группы пользователей. Отсутствует контроль доступа